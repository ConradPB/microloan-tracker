<!DOCTYPE html>
<html>
  <head>
    <title>Sign Up - Microloan Tracker</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <button
      class="btn btn-secondary theme-toggle"
      id="themeToggle"
      aria-label="Toggle Theme"
    >
      <span id="themeIcon"></span>
    </button>
    <div class="signup-container">
      <h2 class="text-center">Sign Up</h2>
      <p class="text-center">Join now to track your loans securely.</p>
      <form method="post">
        {% csrf_token %}
        <input
          type="text"
          name="username"
          class="form-control"
          placeholder="Username"
          required
        />
        <input
          type="password"
          name="password1"
          class="form-control"
          placeholder="Password"
          required
        />
        <input
          type="password"
          name="password2"
          class="form-control"
          placeholder="Confirm Password"
          required
        />
        <button type="submit" class="btn btn-signup w-100 text-white">
          Create Account
        </button>
      </form>
      <p class="text-center login-prompt">
        Already have an account? <a href="{% url 'login' %}">Login</a>
      </p>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const toggleButton = document.getElementById("themeToggle");
        const themeIcon = document.getElementById("themeIcon");
        const html = document.documentElement;
        const savedTheme = document.cookie
          .split("; ")
          .find((row) => row.startsWith("theme="));
        const initialTheme = savedTheme
          ? savedTheme.split("=")[1]
          : window.matchMedia("(prefers-color-scheme: dark)").matches
          ? "dark"
          : "light";
        html.setAttribute("data-theme", initialTheme);
        themeIcon.textContent = initialTheme === "light" ? "üåô" : "‚òÄÔ∏è";

        toggleButton.addEventListener("click", function () {
          const currentTheme = html.getAttribute("data-theme");
          const newTheme = currentTheme === "light" ? "dark" : "light";
          html.setAttribute("data-theme", newTheme);
          themeIcon.textContent = newTheme === "light" ? "üåô" : "‚òÄÔ∏è";
          document.cookie = `theme=${newTheme}; path=/; max-age=31536000`;
        });
      });
    </script>
  </body>
</html>
